{% extends "./base.html" %}

{% block title %} <title> Main Page </title> {% endblock %}

{% load static %}
{% load humanize %}

{% block content %}





<div class="main-page-container">
    <div class="dashboard">
        <div class="filters-section" style="opacity: 0; height: 5rem;" >
              <form >
                <div class="form-row">
                    <div class="form-label-and-input">                        
                        <label class="form-label" for="id_auctionVehicleType">Vehicle</label>
                        <select class="form-control" type="text" id="id_auctionVehicleType" name="auctionVehicleType">
                            <option></option>
                            <option>BOAT</option>
                            <option>CARAVAN</option>
                            <option>CAR</option>
                            <option>BUS</option>
                            <option>WALK</option>
                            <option>RUN</option>
                            <option>BICYCLE</option>
                            <option>MOTORCYCLE</option>
                            <option>TINYHOUSE</option>
                        </select>
                    </div>

                    <div class="form-label-and-input">                        
                        <label class="form-label" for="exampleFormControlSelect1">Vacancy</label>
                        <select class="form-control" type="number" name="vacancy"  id="id_vacancy">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                            <option>6</option>
                            <option>7</option>
                            <option>8</option>
                            <option>9</option>
                            <option>10</option>
                            <option>11</option>
                            <option>12</option>
                            <option>13</option>
                            <option>14</option>
                            <option>15</option>
                            <option>16</option>
                            <option>17</option>
                            <option>18</option>
                            <option>19</option>
                            <option>20</option>
                            <option>21</option>
                            <option>22</option>
                            <option>23</option>
                            <option>24</option>
                            <option>25</option>
                            <option>26</option>
                            <option>27</option>
                            <option>28</option>
                            <option>29</option>
                            <option>30</option>
                            <option>31</option>
                            <option>32</option>
                            <option>33</option>
                            <option>34</option>
                            <option>35</option>
                            <option>36</option>
                            <option>37</option>
                            <option>38</option>
                            <option>39</option>
                            <option>40</option>
                            <option>41</option>
                            <option>42</option>
                            <option>43</option>
                            <option>44</option>
                            <option>45</option>
                            <option>46</option>
                            <option>47</option>
                            <option>48</option>
                            <option>49</option>
                            <option>50</option>
                            <option>51</option>
                            <option>52</option>
                            <option>53</option>
                            <option>54</option>
                            <option>55</option>
                            <option>56</option>
                            <option>57</option>
                            <option>58</option>
                            <option>59</option>
                            <option>60</option>
                            <option>61</option>
                            <option>62</option>
                            <option>63</option>
                            <option>64</option>
                            <option>65</option>
                            <option>66</option>
                            <option>67</option>
                            <option>68</option>
                            <option>69</option>
                        </select> 
                    </div>
                </div>

                <div class="form-row">
                    <div  class="form-label-and-input">                            
                        <label class="form-label" for="exampleFormControlSelect1">Starts</label>
                        <input type="date" name="trip_startDate" id="id_trip_startDate" class="form-control">
                    </div>

                    <div  class="form-label-and-input"> 
                        <label class="form-label" for="exampleFormControlSelect1">Ends</label>
                        <input type="date" name="trip_endDate" id="id_trip_endDate" class="form-control">
                    </div>
                </div>

                <input type="number" step="any" style="display: none;" required="" name="lat__gt" id="lat__gt" ></input>
                <input type="number" step="any" style="display: none;" required="" name="lat__lt" id="lat__lt"></input>
                <input type="number" step="any" style="display: none;" required="" name="lon__gt" id="lon__gt"></input>
                <input type="number" step="any" style="display: none;" required="" name="lon__lt" id="lon__lt"></input>

                <div class="form-row">
                    <button class="btn btn-info double" style="justify-content: right; display: block; font-weight: 700;" id="filter-button" disabled type="submit">Filter</button>
                </div>
                <div class="form-row">
                    <button class="btn btn-info double filterbutton2" style="justify-content: right;" id="filter-button2" disabled type="submit">Update</button>
                </div>



              </form>

        </div>



        <div class="auctions-list">
            <div class="all-auctions-container" id="all-auctions-container">
               <div class="slider" style="height: 40rem;">


                {% for bid in mybids %}
                    

                <div class="slide hidden {{bid.auction.vehicle.vehicle_type}}" id="slide-no-{{forloop.counter0}}" data-slide_number="{{forloop.counter0}}">
                    <div class="card slide-card " id="slide-card-{{forloop.counter}}"
                    style="box-shadow: rgba(28, 16, 190, 0.55) 0px -5px 11px 0px inset"
                    >
                        <img class="card-img-top" style="height: 13rem;" src="{{bid.auction.auctionImage.url}}" alt="Card image cap">
                        <div class="card-body">
                                
                            <h5 class="card-title" style="color: #050B3B;"> <strong >{{bid.auction.auction_title}}</strong></h5>
                            <p class="card-text">Space for <strong class="text-primary" > {{bid.auction.vacancy| intcomma}}</strong>,
                                

                               
                                
                            {% if not bid.auction.vehicle.vehicle_type == "WALK" %}
                                {% if not bid.auction.vehicle.vehicle_type == "RUN" %}
  
                                on <a class="btn btn-primary btn-sm px-2" 
                                style="box-shadow: rgba(3, 7, 59, 0.15) 0px -2px 5px 0px inset,
                                rgba(3, 7, 59, 0.3) 0px -5px 9px 0px inset; 
                                /* rgba(3, 7, 59, 0.4) 0px -7px 11px 0px inset; */
                               border-radius: .9rem; font-weight: 700; border:none;"
                                data-id="{{bid.auction.id}}" href="{% url 'auction:vehicle_detail' bid.auction.vehicle.id %}" 
                                    role="button" aria-pressed="true">{{bid.auction.vehicle.v_name| upper}}</a>

                                {% endif %}
                            {% endif %}

                            {% if bid.auction.vehicle.vehicle_type == "WALK" %}
                                   by <span class="text-primary" style="font-weight: 600;">WALK</span> 
                            {% endif %}

                            {% if bid.auction.vehicle.vehicle_type == "RUN" %}
                                     by <span class="text-primary" style="font-weight: 600;">RUN</span> 
                            {% endif %}
                                
                                
                                
                            <br> 
     
                            Trip from <strong class="text-primary" >{{bid.auction.trip_startDate|date:"M d, y"}}</strong> to 
                            <strong  class="text-primary" >{{bid.auction.trip_endDate|date:"M d, y"}}</strong>.  <br> 
                            
                            Auction ends in <strong  class="text-primary" >{{bid.auction.auctionEndDate|timeuntil}}
                            </strong> .
                        
                            <a href="#" class="btn btn-outline-success btn-sm px-2 pt-1 pb-1 mt-1 card-button-custom" 
                            style=" width: 48%;
                            box-shadow: rgba(3, 7, 59, 0.15) 0px -2px 5px 0px inset,
            rgba(3, 7, 59, 0.3) 0px -5px 9px 0px inset; 
            /* rgba(3, 7, 59, 0.4) 0px -7px 11px 0px inset; */
           border-radius: .9rem; font-weight: 700; border:none;"
                            data-id="{{bid.price}}">My bid: €{{bid.price|intcomma}}</a>

                            <button type="button" class="btn btn-outline-success btn-sm px-2 pt-1 pb-1  mt-1 card-button-custom" 
                            data-container="body" data-toggle="popover" data-placement="bottom"
                            data-content="{{bid.introduction}}"
                            style="width: 48%;box-shadow: rgba(3, 7, 59, 0.15) 0px -2px 5px 0px inset,
                            rgba(3, 7, 59, 0.3) 0px -5px 9px 0px inset; 
                            /* rgba(3, 7, 59, 0.4) 0px -7px 11px 0px inset; */
                           border-radius: .9rem; font-weight: 700; border:none;">
                            My message</button></p>
                        


                            <a href="{% url 'auction:view_auction' bid.auction.id %}" 
                            style="box-shadow: rgba(3, 7, 59, 0.15) 0px -2px 5px 0px inset,
                            rgba(3, 7, 59, 0.3) 0px -5px 9px 0px inset; 
                            /* rgba(3, 7, 59, 0.4) 0px -7px 11px 0px inset; */
                           border-radius: .9rem; font-weight: 700; border:none;
                           margin-left: 1.7rem;"

                            class="btn btn-primary" 
                            data-id="{{bid.auction.id}}">Trip Details</a>
                        
                            <button class="btn btn-primary see-on-map-button m-auto" id="see-on" 
                            data-latitude="{{bid.auction.Latitude}}" 
                            data-longitude="{{bid.auction.Longitude}}" 
                            data-trip_title="{{bid.auction.auction_title}}"
                            data-trip_details="{{bid.auction.auction_brief}}" data-id="{{bid.auction.id}}" 
                            data-slide_number="{{forloop.counter}}" type="submit"
                            style="box-shadow: rgba(3, 7, 59, 0.15) 0px -2px 5px 0px inset,
                            rgba(3, 7, 59, 0.3) 0px -5px 9px 0px inset; 
                            /* rgba(3, 7, 59, 0.4) 0px -7px 11px 0px inset; */
                           border-radius: .9rem; font-weight: 700; border:none; margin-left: .2rem;    font-weight: 700;"

                            >See on Map</button>


                    </div>
                    </div>
                </div>

                {% endfor %}





                <button class="slider__btn slider__btn--left"><img style="height: 2.5rem; transform: rotate(180deg);" src="/static/arrow.png" alt=""></button>
                <button class="slider__btn slider__btn--right"><img style="height: 2.5rem;" src="/static/arrow.png" alt=""></button>
            </div> 
            </div>
        </div>
        <div class="add-new-auction" style="opacity: 0;">
            <a href="#" class="btn btn-primary btn-block w-75 m-auto btn-lg"  style="font-weight: 700;"> New Voyage</a>
        </div>
    </div>
    
    <div class="map-container">
        <div class="mapid" id="mapid" ></div>
    </div>


</div>

{% endblock %}
